"use strict";
var helpers = require("../../node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");
var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);
try {
  var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports["default"] = void 0;
  var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
  var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
  var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
  var _react = require("react");
  var _Movies = _interopRequireDefault(require("../components/Movies"));
  var _movieService = require("../utils/movieService");
  var _Styles = require("../styles/Styles");
  var _jsxRuntime = require("react/jsx-runtime");
  var _s = $RefreshSig$();
  var MoviesList = function MoviesList() {
    _s();
    var _useState = (0, _react.useState)([]), _useState2 = (0, _slicedToArray2["default"])(_useState, 2), data = _useState2[0], setData = _useState2[1];
    var _useState3 = (0, _react.useState)(null), _useState4 = (0, _slicedToArray2["default"])(_useState3, 2), error = _useState4[0], setError = _useState4[1];
    var _useState5 = (0, _react.useState)(false), _useState6 = (0, _slicedToArray2["default"])(_useState5, 2), loading = _useState6[0], setLoading = _useState6[1];
    var handleClick = /*#__PURE__*/(function () {
      var _ref = (0, _asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var movies;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                setLoading(true);
                setError(null);
                _context.prev = 2;
                _context.next = 5;
                return (0, _movieService.getMovies)();
              case 5:
                movies = _context.sent;
                setData(movies);
                document.getElementById('fetch').style.display = 'none';
                _context.next = 13;
                break;
              case 10:
                _context.prev = 10;
                _context.t0 = _context["catch"](2);
                setError(_context.t0);
              case 13:
                _context.prev = 13;
                setLoading(false);
                return _context.finish(13);
              case 16:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[2, 10, 13, 16]]);
      }));
      return function handleClick() {
        return _ref.apply(this, arguments);
      };
    })();
    return (
      /*#__PURE__*/(0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {
        children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(_Movies["default"], {
          data: data
        }), /*#__PURE__*/(0, _jsxRuntime.jsx)(_Styles.Button, {
          type: "button",
          id: "fetch",
          onClick: handleClick,
          children: "Fetch some movies"
        })]
      })
    );
  };
  _s(MoviesList, "8peVUEH1cKI8sB28+/64p/quTTw=");
  _c = MoviesList;
  var _default = MoviesList;
  exports["default"] = _default;
  var _c;
  $RefreshReg$(_c, "MoviesList");
  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
